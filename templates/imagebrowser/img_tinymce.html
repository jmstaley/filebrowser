<script type="text/javascript">

function FileBrowser (field_name, url, type, win) {

    var cmsURL = '/imagebrowser/browse/'+type+'/';

    tinyMCE.activeEditor.windowManager.open({
        file : cmsURL,
        title : 'My File Browser',
        width : 760,
        height : 400,
        resizable : "yes",
        inline : "yes",  
        close_previous : "no",
    }, {
        window : win,
        input : field_name
    });
    return false;
}

function FileSubmit() {
    var URL = document.my_form.my_field.value;
    var win = tinyMCE.getWindowArg("window");

     win.document.getElementById(tinyMCE.getWindowArg("input")).value = URL;

    if (win.getImageData) win.getImageData();

    tinyMCEPopup.close();
}

// Example init
tinyMCE.init({
  mode: "textareas",
  theme: "advanced",
  relative_urls: false,
  formats : {
      italic : {inline : 'span', 'classes' : 'italic'},
      underline : {inline : 'span', 'classes' : 'underline', exact : true},
  },
  theme_advanced_blockformats : "p,h3,h4,h5,h6",
  theme_advanced_disable: "styleselect,help",
  width: "800",
  height: "800",
  file_browser_callback : 'FileBrowser', // call to custom browser
  plugins : "inlinepopups",
  dialog_type : "modal",
});
</script>
